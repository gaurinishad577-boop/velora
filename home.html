<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HariYali ‚Äî Recycle. Earn. Redeem.</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
  :root {
    --green-deep: #1a3d2b;
    --green-mid: #2d6a4f;
    --green-bright: #52b788;
    --green-light: #95d5b2;
    --green-pale: #d8f3dc;
    --amber: #f4a261;
    --amber-dark: #e76f51;
    --cream: #fefae0;
    --dark: #0d1f17;
    --text: #1b2b22;
    --text-muted: #4a6858;
    --white: #ffffff;
    --card-bg: rgba(255,255,255,0.85);
    --radius: 18px;
    --shadow: 0 8px 40px rgba(26,61,43,0.12);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }
  h1,h2,h3,h4 { font-family: 'Syne', sans-serif; }

  /* ===== PAGES ===== */
  .page { display: none; min-height: 100vh; }
  .page.active { display: block; }

  /* ===== NAV ===== */
  nav {
    background: var(--green-deep);
    padding: 0 32px;
    display: flex; align-items: center; justify-content: space-between;
    height: 68px;
    position: sticky; top: 0; z-index: 100;
    box-shadow: 0 2px 20px rgba(0,0,0,0.2);
  }
  .nav-logo {
    font-family: 'Syne', sans-serif;
    font-size: 1.5rem; font-weight: 800;
    color: var(--green-bright);
    cursor: pointer;
    display: flex; align-items: center; gap: 10px;
  }
  .nav-logo span { color: var(--cream); }
  .nav-links { display: flex; gap: 8px; align-items: center; }
  .nav-btn {
    background: none; border: none;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem; font-weight: 500;
    color: var(--green-light);
    padding: 8px 18px; border-radius: 50px;
    cursor: pointer; transition: all 0.2s;
  }
  .nav-btn { text-decoration: none; }
  .nav-btn:hover { background: rgba(82,183,136,0.15); color: var(--white); }
  .nav-btn.primary {
    background: var(--green-bright); color: var(--dark);
    font-weight: 600;
  }
  .nav-btn.primary:hover { background: var(--green-light); }
  .nav-points-pill {
    background: var(--amber);
    color: var(--dark); font-weight: 700;
    font-family: 'Syne', sans-serif;
    padding: 6px 16px; border-radius: 50px;
    font-size: 0.9rem;
    display: flex; align-items: center; gap: 6px;
  }

  /* ===== BUTTONS ===== */
  .btn {
    display: inline-block; padding: 14px 32px;
    border-radius: 50px; border: none;
    font-family: 'Syne', sans-serif; font-size: 1rem; font-weight: 700;
    cursor: pointer; transition: all 0.22s; text-align: center;
  }
  .btn-green { background: var(--green-bright); color: var(--dark); }
  .btn-green:hover { background: var(--green-mid); color: var(--white); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(45,106,79,0.3); }
  .btn-outline { background: transparent; color: var(--green-deep); border: 2px solid var(--green-mid); }
  .btn-outline:hover { background: var(--green-pale); }
  .btn-amber { background: var(--amber); color: var(--dark); }
  .btn-amber:hover { background: var(--amber-dark); color: var(--white); transform: translateY(-2px); }
  .btn-sm { padding: 8px 20px; font-size: 0.85rem; }
  .btn-full { width: 100%; }

  /* ===== ALERTS ===== */
  .alert {
    padding: 12px 18px; border-radius: 10px; font-size: 0.9rem;
    margin-bottom: 16px; display: none;
  }
  .alert.show { display: block; }
  .alert-error { background: #ffe0e0; color: #b91c1c; border: 1px solid #fca5a5; }
  .alert-success { background: var(--green-pale); color: var(--green-deep); border: 1px solid var(--green-light); }

  /* ========== HOME PAGE ========== */
  #page-home { background: var(--cream); }
  .hero {
    min-height: 92vh;
    background: linear-gradient(135deg, var(--green-deep) 0%, var(--green-mid) 60%, #3a8c6c 100%);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    text-align: center; padding: 60px 24px;
    position: relative; overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute; inset: 0;
    background: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2395d5b2' fill-opacity='0.06'%3E%3Ccircle cx='40' cy='40' r='30'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    background-size: 80px;
  }
  .hero-badge {
    background: rgba(82,183,136,0.2); border: 1px solid var(--green-bright);
    color: var(--green-light); padding: 6px 20px; border-radius: 50px;
    font-size: 0.8rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase;
    margin-bottom: 28px; display: inline-block;
  }
  .hero h1 {
    font-size: clamp(2.8rem, 7vw, 5.5rem); font-weight: 800;
    color: var(--white); line-height: 1.05;
    margin-bottom: 24px;
  }
  .hero h1 em { color: var(--green-light); font-style: normal; }
  .hero p {
    font-size: 1.15rem; color: rgba(255,255,255,0.75);
    max-width: 560px; line-height: 1.7; margin-bottom: 40px;
  }
  .hero-btns { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; }
  .hero-stats {
    display: flex; gap: 48px; margin-top: 80px;
    flex-wrap: wrap; justify-content: center;
  }
  .stat { text-align: center; }
  .stat-num { font-family: 'Syne', sans-serif; font-size: 2.2rem; font-weight: 800; color: var(--green-bright); }
  .stat-label { font-size: 0.85rem; color: rgba(255,255,255,0.6); margin-top: 4px; }

  .section { padding: 80px 24px; max-width: 1100px; margin: 0 auto; }
  .section-title { font-size: 2.2rem; font-weight: 800; color: var(--green-deep); margin-bottom: 12px; }
  .section-sub { color: var(--text-muted); font-size: 1rem; margin-bottom: 48px; }

  .how-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 24px; }
  .how-card {
    background: var(--card-bg); border-radius: var(--radius);
    padding: 32px 24px; text-align: center;
    box-shadow: var(--shadow); border: 1px solid rgba(82,183,136,0.15);
    transition: transform 0.2s;
  }
  .how-card:hover { transform: translateY(-4px); }
  .how-icon { font-size: 2.8rem; margin-bottom: 16px; }
  .how-card h3 { font-size: 1.1rem; color: var(--green-deep); margin-bottom: 8px; }
  .how-card p { font-size: 0.9rem; color: var(--text-muted); line-height: 1.6; }
  .how-step {
    width: 32px; height: 32px; border-radius: 50%;
    background: var(--green-pale); color: var(--green-deep);
    font-family: 'Syne', sans-serif; font-weight: 800; font-size: 0.9rem;
    display: inline-flex; align-items: center; justify-content: center;
    margin-bottom: 16px;
  }

  .materials-preview { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 16px; }
  .mat-card {
    background: var(--green-deep); border-radius: 14px;
    padding: 24px 16px; text-align: center; color: var(--white);
    transition: transform 0.2s;
  }
  .mat-card:hover { transform: scale(1.04); }
  .mat-card .emoji { font-size: 2.2rem; margin-bottom: 10px; }
  .mat-card h4 { font-size: 0.95rem; margin-bottom: 4px; }
  .mat-card .pts { font-size: 0.8rem; color: var(--green-light); }

  /* ========== AUTH PAGES ========== */
  .auth-wrap {
    min-height: 100vh;
    background: linear-gradient(160deg, var(--green-pale) 0%, var(--cream) 60%);
    display: flex; align-items: center; justify-content: center;
    padding: 40px 16px;
  }
  .auth-card {
    background: var(--white);
    border-radius: 24px; padding: 48px 40px;
    width: 100%; max-width: 440px;
    box-shadow: 0 20px 60px rgba(26,61,43,0.15);
    border: 1px solid rgba(82,183,136,0.2);
  }
  .auth-logo { font-family: 'Syne', sans-serif; font-size: 1.6rem; font-weight: 800; color: var(--green-deep); margin-bottom: 8px; }
  .auth-logo span { color: var(--green-bright); }
  .auth-sub { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 32px; }
  .form-group { margin-bottom: 20px; }
  .form-group label { display: block; font-size: 0.85rem; font-weight: 500; color: var(--text-muted); margin-bottom: 6px; }
  .form-group input, .form-group select {
    width: 100%; padding: 13px 16px;
    border: 1.5px solid #d1e8da; border-radius: 12px;
    font-family: 'DM Sans', sans-serif; font-size: 0.95rem;
    background: #f8fdf9; color: var(--text);
    transition: border-color 0.2s;
    outline: none;
  }
  .form-group input:focus, .form-group select:focus { border-color: var(--green-bright); background: var(--white); }
  .auth-switch { text-align: center; margin-top: 24px; font-size: 0.9rem; color: var(--text-muted); }
  .auth-switch a { color: var(--green-mid); font-weight: 600; cursor: pointer; text-decoration: none; }
  .auth-switch a:hover { text-decoration: underline; }

  /* ========== DASHBOARD ========== */
  #page-dashboard { background: #f0f7f2; }
  .dash-header {
    background: var(--green-deep); color: var(--white);
    padding: 40px 32px 80px;
    position: relative; overflow: hidden;
  }
  .dash-header::after {
    content: '‚ôª'; font-size: 18rem; opacity: 0.04;
    position: absolute; right: -40px; top: -60px;
    line-height: 1;
  }
  .dash-header h2 { font-size: 1.8rem; margin-bottom: 6px; }
  .dash-header p { opacity: 0.7; font-size: 0.95rem; }
  .dash-cards {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px; max-width: 1100px; margin: -44px auto 0;
    padding: 0 24px;
  }
  .dash-card {
    background: var(--white); border-radius: var(--radius);
    padding: 28px 24px; box-shadow: var(--shadow);
    border: 1px solid rgba(82,183,136,0.12);
  }
  .dash-card .card-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); margin-bottom: 8px; }
  .dash-card .card-value { font-family: 'Syne', sans-serif; font-size: 2rem; font-weight: 800; color: var(--green-deep); }
  .dash-card .card-unit { font-size: 0.85rem; color: var(--text-muted); margin-top: 2px; }
  .dash-card .card-icon { font-size: 1.8rem; margin-bottom: 12px; }

  .dash-content { max-width: 1100px; margin: 40px auto; padding: 0 24px; }
  .dash-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
  @media(max-width:700px) { .dash-grid { grid-template-columns: 1fr; } }
  .panel {
    background: var(--white); border-radius: var(--radius);
    padding: 28px; box-shadow: var(--shadow);
  }
  .panel h3 { font-size: 1.1rem; color: var(--green-deep); margin-bottom: 20px; border-bottom: 2px solid var(--green-pale); padding-bottom: 12px; }
  .activity-item {
    display: flex; align-items: center; gap: 14px;
    padding: 12px 0; border-bottom: 1px solid var(--green-pale);
  }
  .activity-item:last-child { border-bottom: none; }
  .act-icon { width: 40px; height: 40px; border-radius: 10px; background: var(--green-pale); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; flex-shrink: 0; }
  .act-info { flex: 1; }
  .act-info strong { font-size: 0.9rem; color: var(--text); display: block; }
  .act-info span { font-size: 0.8rem; color: var(--text-muted); }
  .act-pts { font-family: 'Syne', sans-serif; font-weight: 700; color: var(--green-mid); font-size: 0.95rem; }

  .quick-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .qa-btn {
    background: var(--green-pale); border: none; border-radius: 14px;
    padding: 20px 16px; text-align: center; cursor: pointer;
    transition: all 0.2s; font-family: 'DM Sans', sans-serif;
  }
  .qa-btn:hover { background: var(--green-light); transform: translateY(-2px); }
  .qa-btn .qa-icon { font-size: 1.8rem; margin-bottom: 8px; }
  .qa-btn span { display: block; font-size: 0.85rem; font-weight: 600; color: var(--green-deep); }

  /* ========== RECYCLE PAGE ========== */
  #page-recycle { background: #f0f7f2; }
  .page-header {
    background: var(--green-deep); padding: 48px 32px;
    color: var(--white);
  }
  .page-header h2 { font-size: 2rem; }
  .page-header p { opacity: 0.7; margin-top: 6px; }

  .recycle-content { max-width: 1100px; margin: 0 auto; padding: 40px 24px; }
  .materials-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; margin-bottom: 40px; }
  .material-card {
    background: var(--white); border-radius: var(--radius);
    padding: 28px; box-shadow: var(--shadow);
    border: 2px solid transparent; cursor: pointer;
    transition: all 0.22s;
  }
  .material-card:hover { border-color: var(--green-bright); transform: translateY(-3px); }
  .material-card.selected { border-color: var(--green-mid); background: var(--green-pale); }
  .material-card .mat-emoji { font-size: 3rem; margin-bottom: 16px; }
  .material-card h3 { font-size: 1.1rem; color: var(--green-deep); margin-bottom: 6px; }
  .material-card p { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 14px; line-height: 1.5; }
  .pts-badge { background: var(--green-pale); color: var(--green-deep); padding: 4px 12px; border-radius: 50px; font-size: 0.8rem; font-weight: 600; font-family: 'Syne', sans-serif; }

  .submit-panel {
    background: var(--white); border-radius: var(--radius);
    padding: 32px; box-shadow: var(--shadow);
  }
  .submit-panel h3 { font-size: 1.2rem; color: var(--green-deep); margin-bottom: 20px; }
  .submit-row { display: flex; gap: 16px; align-items: flex-end; flex-wrap: wrap; }
  .qty-wrap { flex: 1; min-width: 160px; }
  .qty-wrap label { display: block; font-size: 0.85rem; font-weight: 500; color: var(--text-muted); margin-bottom: 6px; }
  .qty-wrap input { width: 100%; padding: 12px 16px; border: 1.5px solid #d1e8da; border-radius: 12px; font-size: 1rem; font-family: 'DM Sans', sans-serif; outline: none; }
  .qty-wrap input:focus { border-color: var(--green-bright); }
  .preview-pts { background: var(--green-pale); border-radius: 12px; padding: 14px 20px; min-width: 160px; text-align: center; }
  .preview-pts .pts-num { font-family: 'Syne', sans-serif; font-size: 1.8rem; font-weight: 800; color: var(--green-deep); }
  .preview-pts .pts-label { font-size: 0.8rem; color: var(--text-muted); }

  .submitted-msg {
    text-align: center; padding: 40px;
    display: none;
  }
  .submitted-msg.show { display: block; }
  .submitted-msg .big-emoji { font-size: 4rem; margin-bottom: 16px; }
  .submitted-msg h3 { font-size: 1.5rem; color: var(--green-deep); margin-bottom: 8px; }
  .submitted-msg p { color: var(--text-muted); }

  /* ========== VOUCHERS PAGE ========== */
  #page-vouchers { background: #f0f7f2; }
  .vouchers-content { max-width: 1100px; margin: 0 auto; padding: 40px 24px; }
  .points-summary {
    background: var(--green-deep); border-radius: var(--radius);
    padding: 32px; color: var(--white); margin-bottom: 32px;
    display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 20px;
  }
  .ps-left h3 { font-size: 1rem; opacity: 0.7; margin-bottom: 4px; }
  .ps-left .big-pts { font-family: 'Syne', sans-serif; font-size: 3rem; font-weight: 800; color: var(--green-bright); }
  .ps-right { text-align: right; }
  .ps-right p { opacity: 0.7; font-size: 0.85rem; margin-bottom: 4px; }
  .ps-right strong { font-family: 'Syne', sans-serif; font-size: 1.2rem; }

  .voucher-cats { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 28px; }
  .cat-pill {
    padding: 8px 20px; border-radius: 50px; border: 1.5px solid #c5ddc9;
    background: var(--white); font-size: 0.85rem; font-weight: 500;
    cursor: pointer; transition: all 0.18s; color: var(--text-muted);
  }
  .cat-pill:hover, .cat-pill.active { background: var(--green-deep); color: var(--white); border-color: var(--green-deep); }

  .vouchers-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
  .voucher-card {
    background: var(--white); border-radius: var(--radius);
    overflow: hidden; box-shadow: var(--shadow);
    border: 1px solid rgba(82,183,136,0.1);
    transition: transform 0.2s;
  }
  .voucher-card:hover { transform: translateY(-3px); }
  .voucher-top {
    padding: 28px; background: linear-gradient(135deg, var(--green-mid), var(--green-deep));
    color: var(--white); position: relative; overflow: hidden;
  }
  .voucher-top::after { content: '‚Çπ'; font-size: 8rem; font-weight: 900; opacity: 0.06; position: absolute; right: -16px; bottom: -24px; font-family: 'Syne', sans-serif; }
  .voucher-brand { font-size: 0.75rem; opacity: 0.7; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 6px; }
  .voucher-top h3 { font-size: 1.15rem; margin-bottom: 4px; }
  .voucher-value { font-family: 'Syne', sans-serif; font-size: 2rem; font-weight: 800; color: var(--green-light); }
  .voucher-bottom { padding: 20px; }
  .voucher-cost { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
  .vc-pts { font-family: 'Syne', sans-serif; font-weight: 700; color: var(--green-deep); font-size: 1rem; }
  .vc-pts span { font-size: 0.75rem; color: var(--text-muted); font-family: 'DM Sans', sans-serif; font-weight: 400; display: block; }
  .voucher-desc { font-size: 0.82rem; color: var(--text-muted); margin-bottom: 16px; line-height: 1.5; }
  .redeem-btn {
    width: 100%; padding: 12px; border-radius: 10px; border: none;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.9rem;
    cursor: pointer; transition: all 0.2s;
  }
  .redeem-btn.can-redeem { background: var(--green-bright); color: var(--dark); }
  .redeem-btn.can-redeem:hover { background: var(--green-mid); color: var(--white); }
  .redeem-btn.cant-redeem { background: var(--green-pale); color: #9ab6a3; cursor: not-allowed; }
  .redeemed-badge {
    background: var(--green-pale); border-radius: 8px;
    padding: 8px 16px; text-align: center;
    font-size: 0.85rem; color: var(--green-mid); font-weight: 600;
    display: none;
  }

  /* MODAL */
  .modal-overlay {
    display: none; position: fixed; inset: 0;
    background: rgba(13,31,23,0.7); backdrop-filter: blur(4px);
    z-index: 999; align-items: center; justify-content: center;
    padding: 16px;
  }
  .modal-overlay.show { display: flex; }
  .modal {
    background: var(--white); border-radius: 24px;
    padding: 40px; max-width: 420px; width: 100%;
    box-shadow: 0 40px 80px rgba(0,0,0,0.2);
    text-align: center;
  }
  .modal .emoji { font-size: 3.5rem; margin-bottom: 16px; }
  .modal h3 { font-size: 1.5rem; color: var(--green-deep); margin-bottom: 10px; }
  .modal p { color: var(--text-muted); font-size: 0.95rem; line-height: 1.6; margin-bottom: 24px; }
  .modal-code {
    background: var(--green-pale); border-radius: 12px;
    padding: 16px; font-family: 'Syne', sans-serif;
    font-size: 1.3rem; font-weight: 800; color: var(--green-deep);
    letter-spacing: 0.15em; margin-bottom: 24px;
  }
  .modal-btns { display: flex; gap: 12px; }
  .modal-btns button { flex: 1; }

  /* TOAST */
  .toast {
    position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%) translateY(80px);
    background: var(--green-deep); color: var(--white);
    padding: 14px 28px; border-radius: 50px;
    font-size: 0.9rem; font-weight: 500;
    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    z-index: 9999; transition: transform 0.35s cubic-bezier(0.34,1.56,0.64,1);
    white-space: nowrap;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* FOOTER */
  footer {
    background: var(--green-deep); color: rgba(255,255,255,0.5);
    text-align: center; padding: 32px;
    font-size: 0.85rem;
  }
  footer strong { color: var(--green-bright); }

  @media(max-width:600px) {
    .auth-card { padding: 32px 24px; }
    .dash-header { padding: 32px 20px 72px; }
    .hero h1 { font-size: 2.4rem; }
    .hero-stats { gap: 28px; }
  }
</style>
</head>
<body>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- MODAL -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <div class="emoji" id="modal-emoji">üéâ</div>
    <h3 id="modal-title">Voucher Redeemed!</h3>
    <p id="modal-body">Your voucher is ready to use.</p>
    <div class="modal-code" id="modal-code">HARI-XYZQ-2026</div>
    <div class="modal-btns">
      <button class="btn btn-outline" onclick="closeModal()">Close</button>
      <button class="btn btn-green" onclick="closeModal()">Done</button>
    </div>
  </div>
</div>

<!-- ======================== HOME PAGE ======================== -->
<div id="page-home" class="page active">
  <nav>
    <a href="index.html" style="text-decoration:none;display:flex;align-items:center;gap:10px;cursor:pointer;" title="Back to portal selector">
      <div class="nav-logo" style="margin:0;">üåø Hari<span>Yali</span></div>
    </a>
    <div class="nav-links">
      <a href="data.html" class="nav-btn" title="Submit recyclables">Submit Recycling</a>
      <a href="index.html" class="nav-btn" title="Logout">Logout</a>
    </div>
  </nav>
  <section class="hero">
    <div class="hero-badge">‚ôª India's Green Rewards Platform</div>
    <h1>Recycle More.<br><em>Earn More.</em></h1>
    <p>Turn your plastic bottles, paper, cardboard and more into reward points. Redeem for vouchers from top Indian brands.</p>
    <div class="hero-btns">
      <button class="btn btn-green" onclick="showPage('register')">Start Earning Points</button>
      <button class="btn btn-outline" style="color:var(--green-light);border-color:var(--green-light);" onclick="document.querySelector('.section').scrollIntoView({behavior:'smooth'})">How It Works</button>
    </div>
    <div class="hero-stats">
      <div class="stat"><div class="stat-num">2.4L+</div><div class="stat-label">KG Recycled</div></div>
      <div class="stat"><div class="stat-num">18,500</div><div class="stat-label">Happy Users</div></div>
      <div class="stat"><div class="stat-num">‚Çπ46L</div><div class="stat-label">Vouchers Issued</div></div>
      <div class="stat"><div class="stat-num">32</div><div class="stat-label">Partner Cities</div></div>
    </div>
  </section>

  <div class="section">
    <div class="section-title">How HariYali Works</div>
    <div class="section-sub">Four simple steps to earn rewards while helping the planet</div>
    <div class="how-grid">
      <div class="how-card">
        <div class="how-step">1</div>
        <div class="how-icon">üìù</div>
        <h3>Register Free</h3>
        <p>Create your account in 30 seconds. No fees, no catch ‚Äî just your details.</p>
      </div>
      <div class="how-card">
        <div class="how-step">2</div>
        <div class="how-icon">‚ôª</div>
        <h3>Select & Submit</h3>
        <p>Choose your recyclable material and quantity. Drop it at the nearest collection point.</p>
      </div>
      <div class="how-card">
        <div class="how-step">3</div>
        <div class="how-icon">‚≠ê</div>
        <h3>Earn Points</h3>
        <p>Points are added to your account instantly after verification at the centre.</p>
      </div>
      <div class="how-card">
        <div class="how-step">4</div>
        <div class="how-icon">üõç</div>
        <h3>Redeem Vouchers</h3>
        <p>Spend your points on Amazon, Swiggy, BigBasket, Paytm and more!</p>
      </div>
    </div>
  </div>

  <div style="background:var(--green-deep); padding:80px 24px;">
    <div style="max-width:1100px;margin:0 auto;">
      <div class="section-title" style="color:var(--white);">What We Accept</div>
      <div class="section-sub" style="color:rgba(255,255,255,0.6);">Points earned per kilogram</div>
      <div class="materials-preview">
        <div class="mat-card"><div class="emoji">üß¥</div><h4>PET Plastic</h4><div class="pts">25 pts/kg</div></div>
        <div class="mat-card"><div class="emoji">üì∞</div><h4>Newspaper</h4><div class="pts">15 pts/kg</div></div>
        <div class="mat-card"><div class="emoji">üì¶</div><h4>Cardboard</h4><div class="pts">12 pts/kg</div></div>
        <div class="mat-card"><div class="emoji">ü•§</div><h4>HDPE Plastic</h4><div class="pts">20 pts/kg</div></div>
        <div class="mat-card"><div class="emoji">üìö</div><h4>Books/Paper</h4><div class="pts">18 pts/kg</div></div>
        <div class="mat-card"><div class="emoji">üõ¢</div><h4>Mixed Plastic</h4><div class="pts">10 pts/kg</div></div>
      </div>
    </div>
  </div>

  <footer>Made with üíö for a cleaner India &nbsp;|&nbsp; <strong>HariYali</strong> &nbsp;|&nbsp; ¬©2026</footer>
</div>

<!-- ======================== LOGIN PAGE ======================== -->
<div id="page-login" class="page">
  <div class="auth-wrap">
    <div class="auth-card">
      <div class="auth-logo">üåø Hari<span>Yali</span></div>
      <div class="auth-sub">Welcome back! Sign in to your account.</div>
      <div class="alert alert-error" id="login-error">Invalid email or password. Please try again.</div>
      <div class="form-group">
        <label>Email Address</label>
        <input type="email" id="login-email" placeholder="priya@example.com">
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="login-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      </div>
      <button class="btn btn-green btn-full" onclick="doLogin()">Sign In</button>
      <div class="auth-switch">Don't have an account? <a onclick="showPage('register')">Register Free</a></div>
      <div class="auth-switch" style="margin-top:8px;"><a onclick="showPage('home')" style="color:var(--text-muted);">‚Üê Back to Home</a></div>
    </div>
  </div>
</div>

<!-- ======================== REGISTER PAGE ======================== -->
<div id="page-register" class="page">
  <div class="auth-wrap">
    <div class="auth-card">
      <div class="auth-logo">üåø Hari<span>Yali</span></div>
      <div class="auth-sub">Join 18,500+ Indians earning while recycling.</div>
      <div class="alert alert-error" id="reg-error">Please fill all fields correctly.</div>
      <div class="alert alert-success" id="reg-success">Account created! Redirecting to login...</div>
      <div class="form-group"><label>Full Name</label><input type="text" id="reg-name" placeholder="Priya Sharma"></div>
      <div class="form-group"><label>Mobile Number</label><input type="tel" id="reg-mobile" placeholder="+91 98765 43210"></div>
      <div class="form-group"><label>Email Address</label><input type="email" id="reg-email" placeholder="priya@example.com"></div>
      <div class="form-group">
        <label>City</label>
        <select id="reg-city">
          <option value="">Select your city</option>
          <option>Mumbai</option><option>Delhi</option><option>Bengaluru</option>
          <option>Hyderabad</option><option>Chennai</option><option>Pune</option>
          <option>Kolkata</option><option>Ahmedabad</option><option>Jaipur</option>
          <option>Thiruvananthapuram</option>
        </select>
      </div>
      <div class="form-group"><label>Password</label><input type="password" id="reg-pass" placeholder="Min 8 characters"></div>
      <button class="btn btn-green btn-full" onclick="doRegister()">Create Account</button>
      <div class="auth-switch">Already have an account? <a onclick="showPage('login')">Sign In</a></div>
      <div class="auth-switch" style="margin-top:8px;"><a onclick="showPage('home')" style="color:var(--text-muted);">‚Üê Back to Home</a></div>
    </div>
  </div>
</div>

<!-- ======================== DASHBOARD ======================== -->
<div id="page-dashboard" class="page">
  <nav>
    <div class="nav-logo" onclick="showPage('dashboard')">üåø Hari<span>Yali</span></div>
    <div class="nav-links">
      <button class="nav-btn" onclick="showPage('recycle')">‚ôª Recycle</button>
      <button class="nav-btn" onclick="showPage('vouchers')">üéÅ Vouchers</button>
      <div class="nav-points-pill">‚≠ê <span id="nav-pts">0</span></div>
      <button class="nav-btn" onclick="doLogout()">Logout</button>
    </div>
  </nav>
  <div class="dash-header">
    <h2>Welcome back, <span id="dash-name">User</span>! üëã</h2>
    <p>Here's your recycling impact dashboard</p>
  </div>
  <div class="dash-cards">
    <div class="dash-card"><div class="card-icon">‚≠ê</div><div class="card-label">Total Points</div><div class="card-value" id="dc-pts">0</div><div class="card-unit">available to redeem</div></div>
    <div class="dash-card"><div class="card-icon">‚öñ</div><div class="card-label">Total Recycled</div><div class="card-value" id="dc-kg">0</div><div class="card-unit">kilograms</div></div>
    <div class="dash-card"><div class="card-icon">üéÅ</div><div class="card-label">Vouchers Redeemed</div><div class="card-value" id="dc-vcr">0</div><div class="card-unit">this month</div></div>
    <div class="dash-card"><div class="card-icon">üå±</div><div class="card-label">CO‚ÇÇ Saved</div><div class="card-value" id="dc-co2">0</div><div class="card-unit">kg equivalent</div></div>
  </div>
  <div class="dash-content">
    <div class="dash-grid">
      <div class="panel">
        <h3>Recent Activity</h3>
        <div id="activity-list"></div>
      </div>
      <div class="panel">
        <h3>Quick Actions</h3>
        <div class="quick-actions">
          <button class="qa-btn" onclick="showPage('recycle')"><div class="qa-icon">‚ôª</div><span>Submit Recycling</span></button>
          <button class="qa-btn" onclick="showPage('vouchers')"><div class="qa-icon">üõç</div><span>Redeem Vouchers</span></button>
          <button class="qa-btn" onclick="showToast('Collection points feature coming soon!')"><div class="qa-icon">üìç</div><span>Find Drop Point</span></button>
          <button class="qa-btn" onclick="showToast('Refer feature coming soon!')"><div class="qa-icon">ü§ù</div><span>Refer a Friend</span></button>
        </div>
        <div style="margin-top:24px;background:var(--green-pale);border-radius:14px;padding:20px;">
          <div style="font-size:0.8rem;color:var(--text-muted);margin-bottom:4px;">NEAREST COLLECTION POINT</div>
          <div style="font-weight:600;color:var(--green-deep);font-size:0.95rem;" id="nearest-point">Loading...</div>
          <div style="font-size:0.8rem;color:var(--text-muted);margin-top:4px;" id="nearest-dist"></div>
        </div>
      </div>
    </div>
  </div>
  <footer style="margin-top:40px;">Made with üíö for a cleaner India &nbsp;|&nbsp; <strong>HariYali</strong></footer>
</div>

<!-- ======================== RECYCLE PAGE ======================== -->
<div id="page-recycle" class="page">
  <nav>
    <div class="nav-logo" onclick="showPage('dashboard')">üåø Hari<span>Yali</span></div>
    <div class="nav-links">
      <button class="nav-btn" onclick="showPage('dashboard')">Dashboard</button>
      <button class="nav-btn" onclick="showPage('vouchers')">üéÅ Vouchers</button>
      <div class="nav-points-pill">‚≠ê <span id="nav-pts-r">0</span></div>
      <button class="nav-btn" onclick="doLogout()">Logout</button>
    </div>
  </nav>
  <div class="page-header">
    <h2>Submit Recyclable Material</h2>
    <p>Select what you're recycling and enter the quantity in kilograms</p>
  </div>
  <div class="recycle-content">
    <div class="materials-grid" id="materials-grid"></div>
    <div class="submit-panel">
      <h3>Submit Your Recycling</h3>
      <div id="no-selection" style="color:var(--text-muted);font-size:0.9rem;margin-bottom:16px;">‚Üê Select a material above to continue</div>
      <div id="submit-form" style="display:none;">
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:20px;background:var(--green-pale);padding:14px;border-radius:12px;">
          <span id="selected-emoji" style="font-size:1.8rem;"></span>
          <div><div style="font-weight:600;color:var(--green-deep);" id="selected-name"></div><div style="font-size:0.82rem;color:var(--text-muted);" id="selected-rate"></div></div>
        </div>
        <div class="submit-row">
          <div class="qty-wrap">
            <label>Quantity (kg)</label>
            <input type="number" id="qty-input" min="0.1" step="0.1" placeholder="e.g. 2.5" oninput="updatePreview()">
          </div>
          <div class="preview-pts">
            <div class="pts-num" id="preview-pts">0</div>
            <div class="pts-label">Points to Earn</div>
          </div>
          <button class="btn btn-green" onclick="submitRecycling()" style="height:fit-content;padding:13px 28px;">Submit ‚ôª</button>
        </div>
      </div>
      <div class="submitted-msg" id="submitted-msg">
        <div class="big-emoji">üéâ</div>
        <h3>Recycling Logged!</h3>
        <p>Your points will be credited once verified at the collection point.<br>Thank you for making India greener!</p>
        <button class="btn btn-green" style="margin-top:20px;" onclick="resetRecycle()">Submit Another</button>
      </div>
    </div>
  </div>
  <footer style="margin-top:40px;">Made with üíö for a cleaner India &nbsp;|&nbsp; <strong>HariYali</strong></footer>
</div>

<!-- ======================== VOUCHERS PAGE ======================== -->
<div id="page-vouchers" class="page">
  <nav>
    <div class="nav-logo" onclick="showPage('dashboard')">üåø Hari<span>Yali</span></div>
    <div class="nav-links">
      <button class="nav-btn" onclick="showPage('dashboard')">Dashboard</button>
      <button class="nav-btn" onclick="showPage('recycle')">‚ôª Recycle</button>
      <div class="nav-points-pill">‚≠ê <span id="nav-pts-v">0</span></div>
      <button class="nav-btn" onclick="doLogout()">Logout</button>
    </div>
  </nav>
  <div class="page-header">
    <h2>Redeem Vouchers</h2>
    <p>Exchange your points for amazing rewards from top Indian brands</p>
  </div>
  <div class="vouchers-content">
    <div class="points-summary">
      <div class="ps-left"><h3>Your Available Points</h3><div class="big-pts" id="v-pts">0</div></div>
      <div class="ps-right">
        <p>Points earned this month</p>
        <strong id="v-month-pts">0</strong>
        <p style="margin-top:12px;">Total redeemed</p>
        <strong id="v-redeemed">0</strong>
      </p>
      </div>
    </div>
    <div class="voucher-cats">
      <div class="cat-pill active" onclick="filterVouchers('all',this)">All</div>
      <div class="cat-pill" onclick="filterVouchers('food',this)">üçî Food</div>
      <div class="cat-pill" onclick="filterVouchers('shopping',this)">üõç Shopping</div>
      <div class="cat-pill" onclick="filterVouchers('grocery',this)">ü•¶ Grocery</div>
      <div class="cat-pill" onclick="filterVouchers('travel',this)">‚úà Travel</div>
      <div class="cat-pill" onclick="filterVouchers('entertainment',this)">üé¨ Entertainment</div>
    </div>
    <div class="vouchers-grid" id="vouchers-grid"></div>
  </div>
  <footer style="margin-top:40px;">Made with üíö for a cleaner India &nbsp;|&nbsp; <strong>HariYali</strong></footer>
</div>

<script>
// ===== DATA =====
const MATERIALS = [
  { id:'pet', emoji:'üß¥', name:'PET Plastic Bottles', desc:'Water bottles, soda bottles, transparent bottles. Rinse before submission.', pts:25, unit:'per kg' },
  { id:'hdpe', emoji:'ü•§', name:'HDPE Plastic', desc:'Milk jugs, detergent bottles, juice cartons. Remove labels if possible.', pts:20, unit:'per kg' },
  { id:'newspaper', emoji:'üì∞', name:'Newspaper & Magazines', desc:'Old newspapers, magazines, pamphlets. Dry and bundled preferred.', pts:15, unit:'per kg' },
  { id:'paper', emoji:'üìö', name:'Office Paper & Books', desc:'Printed paper, notebooks, old books. No laminated paper.', pts:18, unit:'per kg' },
  { id:'cardboard', emoji:'üì¶', name:'Cardboard & Boxes', desc:'E-commerce boxes, cereal boxes, delivery packaging. Flatten before bringing.', pts:12, unit:'per kg' },
  { id:'mixed', emoji:'üõ¢', name:'Mixed Plastics', desc:'Plastic bags, packaging, containers (not PET/HDPE). Clean and dry.', pts:10, unit:'per kg' },
];

const VOUCHERS = [
  { id:'amz100', brand:'Amazon India', name:'Amazon Gift Card', value:'‚Çπ100', pts:200, desc:'Use on any purchase on Amazon.in. Valid for 12 months from issue date.', cat:'shopping' },
  { id:'amz200', brand:'Amazon India', name:'Amazon Gift Card', value:'‚Çπ200', pts:380, desc:'Use on any purchase on Amazon.in. Valid for 12 months from issue date.', cat:'shopping' },
  { id:'swiggy100', brand:'Swiggy', name:'Food Delivery Credit', value:'‚Çπ100', pts:220, desc:'Get ‚Çπ100 off your next Swiggy order. Min order ‚Çπ199. Single use.', cat:'food' },
  { id:'zomato150', brand:'Zomato', name:'Dining Credit', value:'‚Çπ150', pts:300, desc:'‚Çπ150 off on Zomato orders. Valid on all restaurants. Expires in 30 days.', cat:'food' },
  { id:'bigbasket200', brand:'BigBasket', name:'Grocery Voucher', value:'‚Çπ200', pts:350, desc:'‚Çπ200 off on BigBasket. Min order ‚Çπ499. Fresh & staples included.', cat:'grocery' },
  { id:'jiomart100', brand:'JioMart', name:'Grocery Voucher', value:'‚Çπ100', pts:180, desc:'‚Çπ100 off groceries on JioMart. Min order ‚Çπ299.', cat:'grocery' },
  { id:'paytm50', brand:'Paytm', name:'Paytm Cash', value:'‚Çπ50', pts:110, desc:'Add ‚Çπ50 directly to your Paytm wallet. No expiry. Transferable.', cat:'shopping' },
  { id:'paytm150', brand:'Paytm', name:'Paytm Cash', value:'‚Çπ150', pts:290, desc:'Add ‚Çπ150 directly to your Paytm wallet. No expiry. Transferable.', cat:'shopping' },
  { id:'makemytrip', brand:'MakeMyTrip', name:'Travel Voucher', value:'‚Çπ500', pts:900, desc:'‚Çπ500 off on hotel bookings via MakeMyTrip. Valid 6 months.', cat:'travel' },
  { id:'irctc', brand:'IRCTC', name:'Train Ticket Discount', value:'‚Çπ200', pts:350, desc:'‚Çπ200 off on any train ticket booking via IRCTC app or website.', cat:'travel' },
  { id:'netflix', brand:'Netflix', name:'Streaming Credit', value:'1 Month Mobile', pts:500, desc:'One month Netflix Mobile plan voucher. New & existing users.', cat:'entertainment' },
  { id:'bookmyshow', brand:'BookMyShow', name:'Movie Ticket', value:'2 Tickets', pts:450, desc:'2 movie tickets (up to ‚Çπ200 each) via BookMyShow. Any multiplex.', cat:'entertainment' },
  { id:'nykaa', brand:'Nykaa', name:'Beauty Voucher', value:'‚Çπ200', pts:360, desc:'‚Çπ200 off on Nykaa. Valid on all beauty, skincare & wellness products.', cat:'shopping' },
  { id:'myntra', brand:'Myntra', name:'Fashion Voucher', value:'‚Çπ300', pts:550, desc:'‚Çπ300 off on Myntra fashion. Min order ‚Çπ799. All brands included.', cat:'shopping' },
  { id:'dunzo', brand:'Dunzo', name:'Delivery Credit', value:'‚Çπ100', pts:200, desc:'‚Çπ100 off 5 Dunzo deliveries (‚Çπ20 each). Valid for 60 days.', cat:'food' },
];

const COLLECTION_POINTS = {
  'Mumbai': { name: 'Dharavi Green Hub', dist: '1.2 km away' },
  'Delhi': { name: 'Saket Eco Station', dist: '0.8 km away' },
  'Bengaluru': { name: 'Koramangala Recycle Centre', dist: '2.1 km away' },
  'Hyderabad': { name: 'Banjara Hills Collection Point', dist: '1.5 km away' },
  'Chennai': { name: 'T Nagar Green Point', dist: '0.9 km away' },
  'Pune': { name: 'Kothrud Eco Centre', dist: '1.8 km away' },
  'Kolkata': { name: 'Salt Lake Collection Hub', dist: '2.4 km away' },
  'Ahmedabad': { name: 'SG Highway Green Bin', dist: '1.1 km away' },
  'Jaipur': { name: 'Vaishali Nagar Eco Point', dist: '3.0 km away' },
  'Thiruvananthapuram': { name: 'Technopark Recycle Station', dist: '1.4 km away' },
};

// ===== DUMMY USERS =====
const demoUsers = {
  'priya@example.com': { pass:'pass1234', name:'Priya Sharma', city:'Mumbai', pts:1420, kg:72.5, voucherCount:3, monthPts:380, redeemed:560 },
  'arjun@example.com': { pass:'pass1234', name:'Arjun Patel', city:'Bengaluru', pts:680, kg:31.2, voucherCount:1, monthPts:180, redeemed:200 },
};

// ===== STATE =====
let currentUser = null;
let selectedMaterial = null;
let currentFilter = 'all';

// ===== UTILS =====
function showPage(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  window.scrollTo(0,0);
  if (page === 'recycle') renderMaterials();
  if (page === 'vouchers') renderVouchers();
  if (page === 'dashboard') renderDashboard();
  syncPoints();
}

function syncPoints() {
  if (!currentUser) return;
  const pts = currentUser.pts;
  document.querySelectorAll('#nav-pts, #nav-pts-r, #nav-pts-v').forEach(el => { if(el) el.textContent = pts.toLocaleString('en-IN'); });
}

function showToast(msg, duration=2800) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), duration);
}

function showAlert(id, type) {
  const el = document.getElementById(id);
  el.className = 'alert alert-' + type + ' show';
  setTimeout(() => el.classList.remove('show'), 3000);
}

function hideAlert(id) { document.getElementById(id).classList.remove('show'); }

function genCode() {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  return 'HARI-' + Array.from({length:4},()=>chars[Math.floor(Math.random()*chars.length)]).join('') + '-' + new Date().getFullYear();
}

// ===== AUTH =====
function doLogin() {
  const email = document.getElementById('login-email').value.trim().toLowerCase();
  const pass = document.getElementById('login-pass').value;
  const user = demoUsers[email];
  if (user && user.pass === pass) {
    currentUser = { ...user, email };
    showPage('dashboard');
    showToast('Welcome back, ' + currentUser.name.split(' ')[0] + '! üåø');
  } else {
    showAlert('login-error', 'error');
  }
}

function doRegister() {
  const name = document.getElementById('reg-name').value.trim();
  const mobile = document.getElementById('reg-mobile').value.trim();
  const email = document.getElementById('reg-email').value.trim().toLowerCase();
  const city = document.getElementById('reg-city').value;
  const pass = document.getElementById('reg-pass').value;
  if (!name || !mobile || !email || !city || pass.length < 8) {
    showAlert('reg-error', 'error');
    return;
  }
  demoUsers[email] = { pass, name, city, pts:50, kg:0, voucherCount:0, monthPts:50, redeemed:0 };
  showAlert('reg-success', 'success');
  setTimeout(() => {
    document.getElementById('login-email').value = email;
    showPage('login');
    showToast('Account created! 50 welcome points added üéâ');
  }, 1500);
}

function doLogout() {
  currentUser = null;
  showPage('home');
  showToast('Logged out. See you soon! üåø');
}

// ===== DASHBOARD =====
function renderDashboard() {
  if (!currentUser) return;
  document.getElementById('dash-name').textContent = currentUser.name.split(' ')[0];
  document.getElementById('dc-pts').textContent = currentUser.pts.toLocaleString('en-IN');
  document.getElementById('dc-kg').textContent = currentUser.kg.toFixed(1);
  document.getElementById('dc-vcr').textContent = currentUser.voucherCount;
  document.getElementById('dc-co2').textContent = (currentUser.kg * 1.8).toFixed(1);

  const cp = COLLECTION_POINTS[currentUser.city] || { name:'HariYali Eco Station', dist:'Near you' };
  document.getElementById('nearest-point').textContent = cp.name;
  document.getElementById('nearest-dist').textContent = cp.dist;

  const activities = [
    { icon:'üß¥', desc:'Submitted PET Plastic ‚Äì 3 kg', pts:'+75 pts', when:'2 days ago' },
    { icon:'üì∞', desc:'Submitted Newspaper ‚Äì 5 kg', pts:'+75 pts', when:'5 days ago' },
    { icon:'üéÅ', desc:'Redeemed: Amazon ‚Çπ100 Voucher', pts:'-200 pts', when:'1 week ago' },
    { icon:'üì¶', desc:'Submitted Cardboard ‚Äì 4 kg', pts:'+48 pts', when:'2 weeks ago' },
    { icon:'üéÅ', desc:'Redeemed: Swiggy ‚Çπ100 Credit', pts:'-220 pts', when:'3 weeks ago' },
  ];
  const list = document.getElementById('activity-list');
  list.innerHTML = activities.map(a => `
    <div class="activity-item">
      <div class="act-icon">${a.icon}</div>
      <div class="act-info"><strong>${a.desc}</strong><span>${a.when}</span></div>
      <div class="act-pts" style="color:${a.pts.startsWith('-')?'var(--amber-dark)':'var(--green-mid)'}">${a.pts}</div>
    </div>
  `).join('');
}

// ===== RECYCLE =====
function renderMaterials() {
  const grid = document.getElementById('materials-grid');
  grid.innerHTML = MATERIALS.map(m => `
    <div class="material-card" id="mat-${m.id}" onclick="selectMaterial('${m.id}')">
      <div class="mat-emoji">${m.emoji}</div>
      <h3>${m.name}</h3>
      <p>${m.desc}</p>
      <span class="pts-badge">‚≠ê ${m.pts} pts/kg</span>
    </div>
  `).join('');
}

function selectMaterial(id) {
  selectedMaterial = MATERIALS.find(m => m.id === id);
  document.querySelectorAll('.material-card').forEach(c => c.classList.remove('selected'));
  document.getElementById('mat-' + id).classList.add('selected');
  document.getElementById('no-selection').style.display = 'none';
  document.getElementById('submit-form').style.display = 'block';
  document.getElementById('submitted-msg').classList.remove('show');
  document.getElementById('selected-emoji').textContent = selectedMaterial.emoji;
  document.getElementById('selected-name').textContent = selectedMaterial.name;
  document.getElementById('selected-rate').textContent = `‚≠ê ${selectedMaterial.pts} points per kg`;
  document.getElementById('qty-input').value = '';
  document.getElementById('preview-pts').textContent = '0';
}

function updatePreview() {
  if (!selectedMaterial) return;
  const qty = parseFloat(document.getElementById('qty-input').value) || 0;
  document.getElementById('preview-pts').textContent = Math.round(qty * selectedMaterial.pts);
}

function submitRecycling() {
  if (!selectedMaterial || !currentUser) return;
  const qty = parseFloat(document.getElementById('qty-input').value);
  if (!qty || qty <= 0) { showToast('Please enter a valid quantity'); return; }
  const earned = Math.round(qty * selectedMaterial.pts);
  currentUser.pts += earned;
  currentUser.kg += qty;
  currentUser.monthPts += earned;
  demoUsers[currentUser.email] = { ...currentUser };
  document.getElementById('submit-form').style.display = 'none';
  document.getElementById('submitted-msg').classList.add('show');
  document.querySelectorAll('.material-card').forEach(c => c.classList.remove('selected'));
  selectedMaterial = null;
  syncPoints();
  showToast(`+${earned} points added! üåø`);
}

function resetRecycle() {
  document.getElementById('submitted-msg').classList.remove('show');
  document.getElementById('no-selection').style.display = 'block';
  document.getElementById('submit-form').style.display = 'none';
}

// ===== VOUCHERS =====
function renderVouchers() {
  if (!currentUser) return;
  document.getElementById('v-pts').textContent = currentUser.pts.toLocaleString('en-IN');
  document.getElementById('v-month-pts').textContent = currentUser.monthPts.toLocaleString('en-IN') + ' pts';
  document.getElementById('v-redeemed').textContent = currentUser.redeemed.toLocaleString('en-IN') + ' pts';

  const filtered = currentFilter === 'all' ? VOUCHERS : VOUCHERS.filter(v => v.cat === currentFilter);
  const grid = document.getElementById('vouchers-grid');
  grid.innerHTML = filtered.map(v => {
    const canRedeem = currentUser.pts >= v.pts;
    return `
    <div class="voucher-card">
      <div class="voucher-top">
        <div class="voucher-brand">${v.brand}</div>
        <h3>${v.name}</h3>
        <div class="voucher-value">${v.value}</div>
      </div>
      <div class="voucher-bottom">
        <div class="voucher-cost">
          <div class="vc-pts">${v.pts.toLocaleString('en-IN')} pts<span>required</span></div>
          ${!canRedeem ? `<span style="font-size:0.78rem;color:var(--text-muted);">Need ${(v.pts-currentUser.pts).toLocaleString('en-IN')} more</span>` : '<span style="font-size:0.78rem;color:var(--green-mid);">‚úì Enough points</span>'}
        </div>
        <div class="voucher-desc">${v.desc}</div>
        <button class="redeem-btn ${canRedeem?'can-redeem':'cant-redeem'}" 
          ${canRedeem?`onclick="redeemVoucher('${v.id}',${v.pts},'${v.name}','${v.value}','${v.brand}')"`:''}>
          ${canRedeem ? 'üéÅ Redeem Now' : 'üîí Insufficient Points'}
        </button>
      </div>
    </div>`;
  }).join('');
}

function filterVouchers(cat, el) {
  currentFilter = cat;
  document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  renderVouchers();
}

function redeemVoucher(id, pts, name, value, brand) {
  if (!currentUser || currentUser.pts < pts) return;
  currentUser.pts -= pts;
  currentUser.redeemed += pts;
  currentUser.voucherCount += 1;
  demoUsers[currentUser.email] = { ...currentUser };
  const code = genCode();
  document.getElementById('modal-emoji').textContent = 'üéâ';
  document.getElementById('modal-title').textContent = 'Voucher Redeemed!';
  document.getElementById('modal-body').textContent = `Your ${brand} ${name} for ${value} is ready! Use the code below at checkout.`;
  document.getElementById('modal-code').textContent = code;
  document.getElementById('modal').classList.add('show');
  syncPoints();
  setTimeout(renderVouchers, 100);
}

function closeModal() { document.getElementById('modal').classList.remove('show'); }

// ===== KEYBOARD ENTER SUPPORT =====
document.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    const loginEmail = document.getElementById('login-email');
    const regName = document.getElementById('reg-name');
    if (document.getElementById('page-login').classList.contains('active')) doLogin();
    if (document.getElementById('page-register').classList.contains('active')) doRegister();
  }
});

// ===== INIT =====
renderMaterials();
</script>
</body>
</html>